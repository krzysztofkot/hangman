const t=new class{constructor(t,e){this.navElements=document.querySelector(".nav__list"),this.keyboardContainer=document.querySelector(".alphabet"),this.startAgainBtn=document.querySelector("[data-btn='start again']"),this.hintBtn=document.querySelector("[data-btn='hint']"),this.hintPopup=document.querySelector("[data-action='close']"),this.binedKeyboard=this.charClicked.bind(this),this.word=new t,this.ui=new e,this.resizeApp(),this.enableMenu(),this.enableStartAgainBtn(),this.enableHintBtn(),this.enableHintPopup()}resizeApp(){this.resize(),window.addEventListener("resize",this.resize)}resize(){const t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${t}px`)}init(){this.ui.removeHangmanAnimation(),this.ui.removePassword(),this.ui.hideHangman(),this.lives=11,this.ui.displayLives=this.lives,this.ui.removeKeyboard(),this.wrongGuesses=0}startGame(t){if(t.target.closest(".nav__item")){this.init();const e=t.target.closest(".nav__item");this.level=e.dataset.level,this.ui.toggleStartWindow(),this.generate()}}startAgainGame(){this.ui.toggleStartWindow(),this.ui.toggleGameOverPopup(),this.ui.hideStats()}enableMenu(){this.navElements.addEventListener("click",this.startGame.bind(this))}enableHintBtn(){this.hintBtn.addEventListener("click",this.hintBtnAction.bind(this))}enableHintPopup(){this.hintPopup.addEventListener("click",this.hintBtnAction.bind(this))}hintBtnAction(){this.ui.toggleHintPopup()}enableKeyboard(){this.keyboardContainer.addEventListener("click",this.binedKeyboard)}disableKeyboard(){this.keyboardContainer.removeEventListener("click",this.binedKeyboard)}enableStartAgainBtn(){this.startAgainBtn.addEventListener("click",this.startAgainGame.bind(this))}checkCharInWord(t){const e=[];t.forEach(((t,i)=>{const s=document.querySelector(`[data-char="${t}"]`);this.ui.setBtntoInactive(s),s.dataset.used=!0;const{word:n}=this.word.wordObj,a=[];for(let e=0;e<n.length;){const i=n.indexOf(t,e);if(-1===i)break;a.push(i),e=i+1}e[i]=a})),t.forEach(((t,i)=>{e[i].length?this.charMatch(t,e[i]):this.wrongChar()}))}charClicked(t){const e=t.target;if("false"===e.dataset.used){const t=e.dataset.char;this.checkCharInWord([t])}}charMatch(t,e){this.ui.displayChars(t,e),e.forEach((e=>{this.pattern=this.pattern.substr(0,e)+t+this.pattern.substr(e+1)})),this.pattern===this.word.wordObj.word&&this.gameWon()}wrongChar(){this.wrongGuesses++,this.lives-=1,this.ui.displayLives=this.lives,this.ui.showHangmanEl(this.wrongGuesses),this.lives||this.gameLost()}gameWon(){this.disableKeyboard(),setTimeout((()=>{this.ui.showPopup(!0)}),1500)}gameLost(){this.disableKeyboard(),this.ui.addHangmanAnimation(),setTimeout((()=>{this.ui.showPopup(!1,this.word.wordObj.word)}),1500)}async generate(){try{this.ui.toggleSpinner();const t=await this.word.fetchWord(this.level),e=this.word.replaceWord(t.word);let i;i=t.description?this.word.replaceDescription(t.description,t.word):"Sorry, description not provided!",this.word.wordObj={word:e,description:i},this.ui.generatePassword(this.word.wordObj.word),this.ui.generateKeyboard(),this.enableKeyboard(),this.ui.addHintDescription(this.word.wordObj.description),this.pattern="-".repeat(t.word.length),this.ui.showStats()}catch(t){this.ui.showErrorPopup(t),this.ui.hideStats()}finally{this.ui.toggleSpinner()}}}(class{constructor(){}replaceWord(t){const e=new RegExp(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/,"ig");return t.replace(e,"")}replaceDescription(t,e){const i=new RegExp(e,"ig");return t.replace(i,"XXX")}async fetchWord(t){try{const e=this.getQueryParams(t);if(!e)throw new Error("Incorrect level set! Try again");const i=await fetch(`https://api.wordnik.com/v4/words.json/randomWord?hasDictionaryDef=true&${e}&api_key=jemwxxisvxvt7ln9n363blwz6vx6y3jvx9q3uzngzpybctyvo`);if(!i.ok)throw new Error(`Error occured, status code: ${i.status} `);const s=await i.json(),n=await fetch(`https://api.wordnik.com/v4/word.json/${s.word}/definitions?limit=1&includeRelated=false&useCanonical=false&includeTags=false&api_key=jemwxxisvxvt7ln9n363blwz6vx6y3jvx9q3uzngzpybctyvo`);if(!n.ok)throw new Error(`Description search failed. CODE: ${n.status}`);const a=await n.json();let r;return r=a[0].text&&Array.isArray(a[0].text)?a[0].text[1]:a[0].text,{word:s.word.toLowerCase(),description:r}}catch(t){throw t}}getQueryParams(t){let e;switch(t){case"easy":e="minCorpusCount=100000&maxCorpusCount=-1&minDictionaryCount=6&maxDictionaryCount=-1&minLength=6&maxLength=12";break;case"medium":e="minCorpusCount=1000&maxCorpusCount=12000&minDictionaryCount=4&maxDictionaryCount=-1&minLength=5&maxLength=10";break;case"hard":e="minCorpusCount=1&maxCorpusCount=20&minDictionaryCount=1&maxDictionaryCount=2&minLength=5&maxLength=10";break;default:e=-1}return e}},class{constructor(){this.startWindow=document.querySelector(".start"),this.stats=document.querySelector(".playground__top"),this.spinner=document.querySelector(".spinner"),this.popupHint=document.querySelector(".popup--hint"),this.hintDesc=document.querySelector("[data-desc='hint'"),this.popupGameOver=document.querySelector(".popup--game-over"),this.gameOverDesc=document.querySelector("[data-desc='game-over'"),this.wordContainer=document.querySelector(".word"),this.hangmanParts=document.querySelectorAll("[data-parts]"),this.hangmanAnimationParts=document.querySelectorAll("[data-animation]"),this.livesContainer=document.querySelector(".lives__value"),this.characters="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,w,v,x,y,z",this.keyboardContainer=document.querySelector(".alphabet")}removeKeyboard(){for(;this.keyboardContainer.firstChild;)this.keyboardContainer.removeChild(this.keyboardContainer.firstChild)}toggleSpinner(){this.spinner.classList.toggle("hidden")}showStats(){this.stats.classList.remove("hidden")}hideStats(){this.stats.classList.add("hidden")}addHintDescription(t){this.hintDesc.innerHTML=t}displayChars(t,e){const i=document.querySelectorAll("[data-password=true]");e.forEach((e=>{i[e].textContent=t}))}generateKeyboard(){this.characters.split(",").forEach((t=>{const e=document.createElement("button");e.dataset.used=!1,e.dataset.char=t,e.classList.add("alphabet__char"),e.textContent=t,this.keyboardContainer.appendChild(e)}))}toggleStartWindow(){this.startWindow.classList.toggle("hidden")}setBtntoInactive(t){t.classList.add("alphabet__char--used")}generatePassword(t){for(let e=0;e<t.length;e++)this.wordContainer.insertAdjacentHTML("beforeend",'<span class="letter" data-password=true>&nbsp;</span>')}removePassword(){this.wordContainer.textContent=""}hideHangman(){Array.from(this.hangmanParts).forEach((t=>t.classList.add("hidden")))}showHangmanEl(t){t<=this.hangmanParts.length&&this.hangmanParts[t-1].classList.remove("hidden")}set displayLives(t){this.livesContainer.textContent=t}toggleHintPopup(){this.popupHint.classList.toggle("hidden")}toggleGameOverPopup(){this.popupGameOver.classList.toggle("hidden")}showErrorPopup(t){this.toggleGameOverPopup(),this.gameOverDesc.textContent=t.message}showPopup(t,e){let i;this.toggleGameOverPopup(),i=t?"Congratulations You won! Click button below to start over!":`Sorry, You lost.... correct answer was <span class='password'>${e}</span>. Click button below to start over!`,this.gameOverDesc.innerHTML=i}addHangmanAnimation(){this.hangmanAnimationParts.forEach((t=>{const e=t.dataset.animation;t.classList.add(e)}))}removeHangmanAnimation(){this.hangmanAnimationParts.forEach((t=>{const e=t.dataset.animation;t.classList.remove(e)}))}});window.Cypress&&(window.app=t);
//# sourceMappingURL=index.964fc757.js.map
